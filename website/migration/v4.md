# 从 v3 升级到 v4

## 重大变更

1. 现在 `autoImportComponents.globs` 是以 `srcRoot` 作为路径，以前是以 `cwd` 作为基准路径，鼓励将所有的资源都放在 `srcRoot` 内部

```diff
    enhance: {
      autoImportComponents: {
-       globs: ['src/components/**/*'],
+       globs: ['components/**/*'],
      },
    }
```

2. 完全重构的编译核心，带来了更高效的处理速度的同时，也带来了更加强大的扩展性
3. 放弃了 `ts-morph` 编译 `worker` 的实现，因为太慢了，转变为直接使用 `vite` 进行编译
4. 使用 `vite-plugin-commonjs` 来处理项目中带有的 `require` 问题，而不是使用 `@rollup/plugin-commonjs`
